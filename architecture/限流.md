### 限流算法
1. 计数器算法
使用计数器实现限流算法，限流策略为在1秒内只允许有100个请求通过，一旦计数满了，拒绝所有的后续请求。假设0.1秒内就达到了100，那么剩下的0.9秒就无法提供服务了，这样在图形上就形成了一个突刺，这种现象称为“突刺现象”。
2. 漏桶算法
漏桶算法通过一个比较大的容器来接收请求，然后另一端匀速取出请求处理，处理速率是固定的，在一定程度上解决了突刺现象。当容器满了，就拒绝请求。设计是容器的容量尽可能承载1s内的请求，代码实现时可以使用队列来存放需要处理的请求。
3. 令牌桶算法
令牌桶算法在漏桶算法的基础上进行了改进，漏桶算法只能均匀地处理请求，令牌桶可以解决这个问题。令牌桶需要一个容器存储令牌，令牌以一定的速率往令牌桶中存放（避免了突刺现象），当桶中的令牌数量超过了桶的容量，则丢弃掉。当一个请求过来时，需要从令牌桶中获取令牌，获取令牌成功，则请求通过；如果令牌桶中的令牌消耗完毕了，则获取令牌失败，拒绝请求。
当网络设备衡量流量是否超过额定带宽时，需要查看令牌桶，而令牌桶中会放置一定数量的令牌，一个令牌允许接口发送或接收1bit数据（有时是1 Byte数据），当接口通过1bit数据后，同时也要从桶中移除一个令牌。当桶里没有令牌的时候，任何流量都被视为超过额定带宽,只有当桶中有令牌时，数据才可以通过接口。令牌桶中的令牌不仅仅可以被移除，同样也可以往里添加，所以为了保证接口随时有数据通过，就必须不停地往桶里加令牌，由此可见，往桶里加令牌的速度，就决定了数据通过接口的速度。因此，我们通过控制往令牌桶里加令牌的速度从而控制用户流量的带宽。而设置的这个用户传输数据的速率被称为承诺信息速率（CIR），通常以秒为单位。比如我们设置用户的带宽为1000  bit每秒，只要保证每秒钟往桶里添加1000个令牌即可。
